language: python
python:
- '2.7'
- '3.3'
- '3.4'
install:
- travis_retry pip install -r requirements.txt -r requirements-dev.txt -e .
- travis_retry pip install coverage coveralls
services:
- redis-server
before_install:
- openssl aes-256-cbc -K $encrypted_ed430a932405_key -iv $encrypted_ed430a932405_iv
  -in secrets.py.enc -out gfsad/config/secrets.py -d
before_script:
- psql -c 'create database test;' -U postgres
- psql -c 'CREATE EXTENSION postgis;' -U postgres -d test
- psql -c 'CREATE EXTENSION postgis_topology;' -U postgres -d test
script: py.test --pep8 --flakes -vvv
after_script:
- coveralls
branches:
  only:
  - master
